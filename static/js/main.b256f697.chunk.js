(this["webpackJsonpnow-what"]=this["webpackJsonpnow-what"]||[]).push([[0],{171:function(e,t,a){e.exports=a(406)},176:function(e,t,a){},178:function(e,t,a){},179:function(e,t,a){},180:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},218:function(e,t){},232:function(e,t){},234:function(e,t){},401:function(e,t,a){},402:function(e,t,a){},403:function(e,t,a){},404:function(e,t,a){},405:function(e,t,a){},406:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(168),s=a.n(c),o=a(14),i=(a(176),a(1)),l=a.n(i),u=a(4),m=a(19),f=a(3),p=(a(178),a(2)),h=(a(179),function(e){var t=Object(n.useState)(""),a=Object(f.a)(t,2),c=a[0],s=a[1],o=function(){c.trim()&&(e.searchTerm(c.trim()),s(c.trim()))};return r.a.createElement("section",{className:"form-background"},r.a.createElement("section",{className:"text-container"},r.a.createElement("h1",{className:"main-page-text"},"Find Your Next Obession"),r.a.createElement("p",{className:"main-page-p"},"Get recommendations for books, movies, games, artists, and tv shows by searching for a specific title")),r.a.createElement("section",{className:"form-container"},r.a.createElement("form",{className:"SearchForm",onSubmit:function(e){return e.preventDefault()}},r.a.createElement("input",{placeholder:"ex: Frozen",onChange:function(e){return s(e.target.value)},onKeyDown:function(e){return"Enter"===e.key&&o()},value:c,"aria-label":"Title Search"}),r.a.createElement("button",{onClick:o},"Search"))))}),v=(a(180),function(e){return r.a.createElement("header",null,r.a.createElement(o.b,{to:"/",className:"homepage-link"},r.a.createElement("section",{className:"title-section"},r.a.createElement("button",{className:"now-what-button",onClick:function(){return e.clearResults()}},r.a.createElement("h1",{className:"now-what-text"},"Now What!?")))),r.a.createElement("section",{className:"actions"},r.a.createElement(o.b,{to:"/favorites",className:"navlink"},r.a.createElement("p",{className:"favorites"},"FAVORITES"))))}),E=(a(185),a(186),function(e){var t=Object(n.useState)(e.favorite?"-fill":""),a=Object(f.a)(t,2),c=a[0],s=a[1];return r.a.createElement("button",{onClick:function(){e.toggleFavorite(),s(c?"":"-fill")},"aria-label":"favorite",className:"FavoriteButton"},r.a.createElement("img",{src:"/images/favorite".concat(c,".svg"),alt:"favorite"}))}),b=a(170),g=a.n(b)()({apiUrl:"https://en.wikipedia.org/w/api.php"}),d=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://cors-anywhere.herokuapp.com/",a=t.split(" ").join("+"),n="".concat("https://cors-anywhere.herokuapp.com/","https://tastedive.com/api/similar?q=").concat(a,"&verbose=1&k=372838-DavePern-7J59GJ8D"),e.next=5,fetch(n);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(u.a)(l.a.mark((function e(t){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://cors-anywhere.herokuapp.com/",a="".concat("https://cors-anywhere.herokuapp.com/","https://tastedive.com/api/similar?q=").concat(t,"&verbose=1&k=372838-DavePern-7J59GJ8D&limit=3"),e.next=4,fetch(a).then((function(e){return e.json()})).catch((function(e){return console.log(e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://cors-anywhere.herokuapp.com/",a=t.join("%2C"),n="".concat("https://cors-anywhere.herokuapp.com/","https://tastedive.com/api/similar?q=").concat(a,"&verbose=1&k=372838-DavePern-7J59GJ8D&limit=1"),e.next=5,fetch(n).then((function(e){return e.json()}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=decodeURI(t.split("/").pop()),e.next=3,g.page(a).then((function(e){return e.mainImage()}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(l.a.mark((function e(){var t,a,n,r,c,s,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/data/editors.json").then((function(e){return e.json()}));case 2:for(t=e.sent,a=[],n=0,r=Object.values(t);n<r.length;n++)c=r[n],a.push.apply(a,Object(m.a)(c));return s=a.reduce((function(e,t){return e[e.length-1].push(t)>10&&e.push([]),e}),[[]]),e.next=8,Promise.all(s.map(function(){var e=Object(u.a)(l.a.mark((function e(t){var a,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=encodeURI(t.join()),"https://cors-anywhere.herokuapp.com/",n="".concat("https://cors-anywhere.herokuapp.com/","https://tastedive.com/api/similar?q=").concat(a,"&verbose=1&k=372838-DavePern-7J59GJ8D&limit=1"),e.abrupt("return",fetch(n).then((function(e){return e.ok?e.json():console.error(e)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 8:return o=e.sent,e.abrupt("return",o.reduce((function(e,t){return[].concat(Object(m.a)(e),Object(m.a)(t.Similar.Info))}),[]));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k=function(e){var t=e.data,a=t.Name,c=t.wUrl,s=t.Type,i="/title/".concat(a.replace(/\s/g,"+")),m=Object(n.useState)(""),p=Object(f.a)(m,2),h=p[0],v=p[1],b=function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,j(c);case 3:(t=e.sent)&&v(t),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.error(e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){b()})),r.a.createElement("article",{className:"Result"},r.a.createElement(o.b,{to:i},r.a.createElement("img",{src:h,alt:a,className:"result-card-image"}),r.a.createElement("h3",null,a)),r.a.createElement(E,{toggleFavorite:function(){return e.toggleFavorite(s+":"+a)},favorite:e.favorite}))},O=(a(401),function(e){var t=e.results.map((function(t){return r.a.createElement(k,{key:t.Name,data:t,toggleFavorite:e.toggleFavorite,favorite:e.favorites.includes("".concat(t.Type,":").concat(t.Name)),type:t.Type})})),a=t.shift();return r.a.createElement(r.a.Fragment,null,r.a.createElement("h2",null,"Search Results"),r.a.createElement("div",{className:"ResultsPage"},r.a.createElement("section",{className:"search-item-display"},r.a.createElement("h2",null,"Main Title"),a),r.a.createElement("section",{className:"results-container"},r.a.createElement("h2",null,"Related Titles"),t)))}),x=(a(402),function(e){var t=e.results.reduce((function(t,a){var n=r.a.createElement(k,{key:a.Name,data:a,toggleFavorite:e.toggleFavorite,favorite:e.favorites.includes("".concat(a.Type,":").concat(a.Name)),type:a.Type});return t[a.Type]||(t[a.Type]=[]),t[a.Type].push(n),t}),{});return r.a.createElement("section",null,r.a.createElement("h2",{className:"favorites-header"},"Favorites"),r.a.createElement("div",{className:"favorites-display"},r.a.createElement("section",{className:"favorites-section"},t.movie&&r.a.createElement("h3",{className:"favorite-type-header"},"Movies"),t.movie),r.a.createElement("section",{className:"favorites-section"},t.show&&r.a.createElement("h3",{className:"favorite-type-header"},"TV Shows"),t.show),r.a.createElement("section",{className:"favorites-section"},t.game&&r.a.createElement("h3",{className:"favorite-type-header"},"Games"),t.game),r.a.createElement("section",{className:"favorites-section"},t.music&&r.a.createElement("h3",{className:"favorite-type-header"},"Music"),t.music),r.a.createElement("section",{className:"favorites-section"},t.book&&r.a.createElement("h3",{className:"favorite-type-header"},"Books"),t.book),r.a.createElement("section",{className:"favorites-section"},t.author&&r.a.createElement("h3",{className:"favorite-type-header"},"Authors"),t.author),r.a.createElement("section",{className:"favorites-section"},t.podcasts&&r.a.createElement("h3",{className:"favorite-type-header"},"Podcasts"),t.podcasts)))}),S=function(e){var t=Object(n.useState)([]),a=Object(f.a)(t,2),c=a[0],s=a[1];return Object(n.useEffect)((function(){function t(){return(t=Object(u.a)(l.a.mark((function t(){var a,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N(e.favorites);case 2:a=t.sent,(n=a.Similar)&&s(n.Info);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.favorites]),e.favorites.length?r.a.createElement(x,{results:c,toggleFavorite:e.toggleFavorite,favorites:e.favorites}):r.a.createElement("p",null,"Nothing favorited yet. Add some to see them here!")},F=(a(403),a(404),function(e){var t=Object(n.useState)(""),a=Object(f.a)(t,2),c=a[0],s=a[1];return Object(n.useEffect)((function(){function t(){return(t=Object(u.a)(l.a.mark((function t(){var a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,j(e.wUrl);case 3:(a=t.sent)&&s(a),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))).apply(this,arguments)}!function(){t.apply(this,arguments)}()}),[e.wUrl]),r.a.createElement(o.b,{to:"".concat(e.Name.split(" ").join("+"))},r.a.createElement("section",{className:"related-item"},r.a.createElement("img",{src:c,alt:e.Name}),r.a.createElement("h5",{className:"related-item-title"},e.Name)))}),T=function(e){var t=Object(n.useState)([]),a=Object(f.a)(t,2),c=a[0],s=a[1],o=Object(n.useState)([]),i=Object(f.a)(o,2),m=i[0],p=i[1],h=Object(n.useState)(""),v=Object(f.a)(h,2),b=v[0],g=v[1];if(Object(n.useEffect)((function(){function t(){return(t=Object(u.a)(l.a.mark((function t(){var a,n,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,y(e.url);case 2:if(!(a=t.sent)){t.next=18;break}return s(a.Similar.Results),p(a.Similar.Info),t.prev=6,n=a.Similar.Info[0].wUrl,t.next=10,j(n);case 10:(r=t.sent)&&g(r),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(6),g("");case 17:return t.abrupt("return",a);case 18:case"end":return t.stop()}}),t,null,[[6,14]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),s([])}),[e.url]),c.length&&m.length){var d=c.map((function(e){return r.a.createElement(F,Object.assign({},e,{key:e.yID}))}));return r.a.createElement("section",{className:"title-page"},r.a.createElement("aside",{className:"title-overview"},r.a.createElement("section",{className:"title-header"},r.a.createElement("h1",{className:"title-title"},m[0].Name),r.a.createElement(E,{toggleFavorite:function(){return e.toggleFavorite("".concat(m[0].Type,":").concat(m[0].Name))},favorite:e.isFavorite("".concat(m[0].Type,":").concat(m[0].Name))})),b.length&&r.a.createElement("img",{src:b,alt:m[0].Name,className:"title-image"}),r.a.createElement("figure",{className:"title-image"}),r.a.createElement("a",{href:m[0].yUrl,target:"_blank",rel:"noopener noreferrer"},r.a.createElement("img",{className:"youtube-link",src:"/images/youtube_logo.png",alt:"youtube-logo"}))),r.a.createElement("main",{className:"title-detailed-info"},r.a.createElement("p",null,m[0].wTeaser),r.a.createElement("p",{className:"wiki-link"},r.a.createElement("a",{href:m[0].wUrl,target:"_blank",rel:"noopener noreferrer"},"Read more...")),r.a.createElement("h3",null,"Related Items"),r.a.createElement("section",{className:"all-related-items"},c&&d)))}return r.a.createElement("section",null,r.a.createElement("h5",null,"Loading..."))},I=(a(405),function(e){var t=Object(n.useState)([]),a=Object(f.a)(t,2),c=a[0],s=a[1];Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w();case 2:t=e.sent,s(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var o=["movie","show","game","music"].map((function(t){return r.a.createElement("div",{className:"editor-pick-section",key:t},r.a.createElement("h3",{className:"editor-pick-section-header"},"Editor's Picks: ","music"!==t?t+"s":"artists"),function(e){return c.filter((function(t){return t.Type===e}))}(t).map((function(t){return r.a.createElement(k,{data:t,toggleFavorite:e.toggleFavorite,favorite:e.isFavorite("".concat(t.Type,":").concat(t.Name)),type:"",key:t.yID})})))}));return r.a.createElement("div",{className:"Editors-Choice"},o)});var R=function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],c=t[1],s=Object(n.useState)(!1),o=Object(f.a)(s,2),i=o[0],E=o[1],b=Object(n.useState)(null),g=Object(f.a)(b,2),y=g[0],N=g[1],j=Object(n.useState)([]),w=Object(f.a)(j,2),k=w[0],x=w[1];Object(n.useEffect)((function(){var e=localStorage.getItem("favorites");e&&x(JSON.parse(e))}),[]),Object(n.useEffect)((function(){localStorage.setItem("favorites",JSON.stringify(k))}),[k]);var F=function(e){k.includes(e)?x(k.filter((function(t){return t!==e}))):x([].concat(Object(m.a)(k),[e]))},R=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(null),E(!0),d(t).then((function(e){return e.ok?e.json():N(e.status)})).then((function(e){return e?c([].concat(Object(m.a)(e.Similar.Info),Object(m.a)(e.Similar.Results))):null})).catch((function(e){return N(e)})),E(!1);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("main",{className:"App"},r.a.createElement(v,{searchTerm:R,clearResults:function(){c([])}}),y&&r.a.createElement("h3",{className:"error"},"We're sorry, but there seems to have been an issue. Please refresh the page and try again. (Error code: ",y,")"),r.a.createElement(p.c,null,r.a.createElement(p.a,{path:"/favorites"},r.a.createElement(S,{favorites:k,toggleFavorite:F})),r.a.createElement(p.a,{path:"/search/:query"}),r.a.createElement(p.a,{path:"/title/:name",render:function(e){var t=e.match.params.name;return r.a.createElement(T,{url:t,toggleFavorite:F,isFavorite:function(e){return k.includes(e)}})}}),r.a.createElement(p.a,{exact:!0,path:"/"},r.a.createElement(h,{searchTerm:R}),i&&r.a.createElement("p",null,"Finding matches..."),0!==a.length?r.a.createElement(O,{results:a,toggleFavorite:F,favorites:k}):r.a.createElement(I,{toggleFavorite:F,isFavorite:function(e){return k.includes(e)}}))))};s.a.render(r.a.createElement(o.a,{basename:"https://rubyr.github.io/now-what"},r.a.createElement(R,null)),document.getElementById("root"))}},[[171,1,2]]]);
//# sourceMappingURL=main.b256f697.chunk.js.map